{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/GitHub/cisc498ResistorReader/src/components/CameraCapture.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CameraCapture = () => {\n  _s();\n  const videoRef = useRef();\n  const canvasRef = useRef();\n  const [stream, setStream] = useState(null);\n  const [videoLoaded, setVideoLoaded] = useState(false);\n  const [showCaptureButton, setShowCaptureButton] = useState(false);\n  let navigate = useNavigate();\n  useEffect(() => {\n    const constraints = {\n      video: true\n    };\n    navigator.mediaDevices.getUserMedia(constraints).then(stream => {\n      setStream(stream);\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n      }\n    }).catch(err => console.error(err));\n    return () => {\n      if (stream) {\n        stream.getTracks().forEach(track => track.stop());\n      }\n    };\n  });\n  useEffect(() => {\n    if (videoLoaded) {\n      setShowCaptureButton(true);\n    }\n  }, [videoLoaded]);\n  const handleVideoLoaded = () => {\n    setVideoLoaded(true);\n  };\n  const handleCapture = () => {\n    if (!canvasRef.current || !videoRef.current) {\n      return;\n    }\n    const canvas = canvasRef.current;\n    const video = videoRef.current;\n    const context = canvas.getContext(\"2d\");\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    context.drawImage(video, 0, 0, canvas.width, canvas.height);\n    const dataURL = canvas.toDataURL(\"image/png\");\n    navigate(`/processing?img=${encodeURIComponent(dataURL)}`);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Capture a photo using your laptop camera\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      onLoadedMetadata: handleVideoLoaded,\n      autoPlay: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), showCaptureButton && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleCapture,\n      children: \"Capture\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 29\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        display: \"none\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n_s(CameraCapture, \"M9czivifTtFYa0WTiUtEv0SYzL8=\", false, function () {\n  return [useNavigate];\n});\n_c = CameraCapture;\nexport default CameraCapture;\nvar _c;\n$RefreshReg$(_c, \"CameraCapture\");","map":{"version":3,"names":["useEffect","useRef","useState","useNavigate","CameraCapture","videoRef","canvasRef","stream","setStream","videoLoaded","setVideoLoaded","showCaptureButton","setShowCaptureButton","navigate","constraints","video","navigator","mediaDevices","getUserMedia","then","current","srcObject","catch","err","console","error","getTracks","forEach","track","stop","handleVideoLoaded","handleCapture","canvas","context","getContext","width","videoWidth","height","videoHeight","drawImage","dataURL","toDataURL","encodeURIComponent","display"],"sources":["/Users/mac/Documents/GitHub/cisc498ResistorReader/src/components/CameraCapture.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst CameraCapture = () => {\n  const videoRef = useRef();\n  const canvasRef = useRef();\n  const [stream, setStream] = useState(null);\n  const [videoLoaded, setVideoLoaded] = useState(false);\n  const [showCaptureButton, setShowCaptureButton] = useState(false);\n  let navigate = useNavigate();\n\n  useEffect(() => {\n    const constraints = { video: true };\n    navigator.mediaDevices.getUserMedia(constraints)\n      .then(stream => {\n        setStream(stream);\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n        }\n      })\n      .catch(err => console.error(err));\n\n    return () => {\n      if (stream) {\n        stream.getTracks().forEach(track => track.stop());\n      }\n    }\n  });\n\n  useEffect(() => {\n    if (videoLoaded) {\n      setShowCaptureButton(true);\n    }\n  }, [videoLoaded]);\n\n  const handleVideoLoaded = () => {\n    setVideoLoaded(true);\n  };\n\n  const handleCapture = () => {\n    if (!canvasRef.current || !videoRef.current) {\n      return;\n    }\n\n    const canvas = canvasRef.current;\n    const video = videoRef.current;\n    const context = canvas.getContext(\"2d\");\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    context.drawImage(video, 0, 0, canvas.width, canvas.height);\n    const dataURL = canvas.toDataURL(\"image/png\");\n    navigate(`/processing?img=${encodeURIComponent(dataURL)}`);\n  };\n\n  return (\n    <div>\n      <h2>Capture a photo using your laptop camera</h2>\n      <video\n        ref={videoRef}\n        onLoadedMetadata={handleVideoLoaded}\n        autoPlay\n      />\n      {showCaptureButton && <button onClick={handleCapture}>Capture</button>}\n      <canvas\n        ref={canvasRef}\n        style={{ display: \"none\" }}\n      />\n    </div>\n  );\n};\n\nexport default CameraCapture;\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AACnD,SAASC,WAAW,QAAQ,kBAAkB;AAAC;AAE/C,MAAMC,aAAa,GAAG,MAAM;EAAA;EAC1B,MAAMC,QAAQ,GAAGJ,MAAM,EAAE;EACzB,MAAMK,SAAS,GAAGL,MAAM,EAAE;EAC1B,MAAM,CAACM,MAAM,EAAEC,SAAS,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACO,WAAW,EAAEC,cAAc,CAAC,GAAGR,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACS,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;EACjE,IAAIW,QAAQ,GAAGV,WAAW,EAAE;EAE5BH,SAAS,CAAC,MAAM;IACd,MAAMc,WAAW,GAAG;MAAEC,KAAK,EAAE;IAAK,CAAC;IACnCC,SAAS,CAACC,YAAY,CAACC,YAAY,CAACJ,WAAW,CAAC,CAC7CK,IAAI,CAACZ,MAAM,IAAI;MACdC,SAAS,CAACD,MAAM,CAAC;MACjB,IAAIF,QAAQ,CAACe,OAAO,EAAE;QACpBf,QAAQ,CAACe,OAAO,CAACC,SAAS,GAAGd,MAAM;MACrC;IACF,CAAC,CAAC,CACDe,KAAK,CAACC,GAAG,IAAIC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC,CAAC;IAEnC,OAAO,MAAM;MACX,IAAIhB,MAAM,EAAE;QACVA,MAAM,CAACmB,SAAS,EAAE,CAACC,OAAO,CAACC,KAAK,IAAIA,KAAK,CAACC,IAAI,EAAE,CAAC;MACnD;IACF,CAAC;EACH,CAAC,CAAC;EAEF7B,SAAS,CAAC,MAAM;IACd,IAAIS,WAAW,EAAE;MACfG,oBAAoB,CAAC,IAAI,CAAC;IAC5B;EACF,CAAC,EAAE,CAACH,WAAW,CAAC,CAAC;EAEjB,MAAMqB,iBAAiB,GAAG,MAAM;IAC9BpB,cAAc,CAAC,IAAI,CAAC;EACtB,CAAC;EAED,MAAMqB,aAAa,GAAG,MAAM;IAC1B,IAAI,CAACzB,SAAS,CAACc,OAAO,IAAI,CAACf,QAAQ,CAACe,OAAO,EAAE;MAC3C;IACF;IAEA,MAAMY,MAAM,GAAG1B,SAAS,CAACc,OAAO;IAChC,MAAML,KAAK,GAAGV,QAAQ,CAACe,OAAO;IAC9B,MAAMa,OAAO,GAAGD,MAAM,CAACE,UAAU,CAAC,IAAI,CAAC;IACvCF,MAAM,CAACG,KAAK,GAAGpB,KAAK,CAACqB,UAAU;IAC/BJ,MAAM,CAACK,MAAM,GAAGtB,KAAK,CAACuB,WAAW;IACjCL,OAAO,CAACM,SAAS,CAACxB,KAAK,EAAE,CAAC,EAAE,CAAC,EAAEiB,MAAM,CAACG,KAAK,EAAEH,MAAM,CAACK,MAAM,CAAC;IAC3D,MAAMG,OAAO,GAAGR,MAAM,CAACS,SAAS,CAAC,WAAW,CAAC;IAC7C5B,QAAQ,CAAE,mBAAkB6B,kBAAkB,CAACF,OAAO,CAAE,EAAC,CAAC;EAC5D,CAAC;EAED,oBACE;IAAA,wBACE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAAiD,eACjD;MACE,GAAG,EAAEnC,QAAS;MACd,gBAAgB,EAAEyB,iBAAkB;MACpC,QAAQ;IAAA;MAAA;MAAA;MAAA;IAAA,QACR,EACDnB,iBAAiB,iBAAI;MAAQ,OAAO,EAAEoB,aAAc;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAAiB,eACtE;MACE,GAAG,EAAEzB,SAAU;MACf,KAAK,EAAE;QAAEqC,OAAO,EAAE;MAAO;IAAE;MAAA;MAAA;MAAA;IAAA,QAC3B;EAAA;IAAA;IAAA;IAAA;EAAA,QACE;AAEV,CAAC;AAAC,GAlEIvC,aAAa;EAAA,QAMFD,WAAW;AAAA;AAAA,KANtBC,aAAa;AAoEnB,eAAeA,aAAa;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}